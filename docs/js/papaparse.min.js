/* @license
Papa Parse
v5.3.2
https://github.com/mholt/PapaParse
License: MIT
*/
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&"undefined"!=typeof exports?module.exports=t():e.Papa=t()}(this,function s(){"use strict";var f="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==f?f:{};var n=!f.document&&!!f.postMessage,o=n&&/blob:/i.test((f.location||{}).protocol),a={},h=0,b={parse:function(e,t){var i=(t=t||{}).dynamicTyping||!1;M(i)&&(t.dynamicTypingFunction=i,i={});if(t.dynamicTyping=i,t.transform=!!M(t.transform)&&t.transform,t.worker&&b.WORKERS_SUPPORTED){var r=function(){if(!b.WORKERS_SUPPORTED)return!1;var e=(i=f.URL||f.webkitURL||null,r=s.toString(),b.BLOB_URL||(b.BLOB_URL=i.createObjectURL(new Blob(["(",r,")();"],{type:"text/javascript"})))),t=new f.Worker(e);var i,r;return t.onmessage=_,t.id=h++,a[t.id]=t}();return r.userStep=t.step,r.userChunk=t.chunk,r.userComplete=t.complete,r.userError=t.error,t.step=M(t.step),t.chunk=M(t.chunk),t.complete=M(t.complete),t.error=M(t.error),delete t.worker,void r.postMessage({input:e,config:t,workerId:r.id})}var n=null;b.NODE_STREAM_INPUT,"string"==typeof e?n=t.download?new l(t):new p(t):!0===e.readable&&M(e.read)&&M(e.on)?n=new g(t):(f.File&&e instanceof File||e instanceof Object)&&(n=new c(t));return n.stream(e)},unparse:function(e,t){var n=!1,_=!0,m=",",y="\r\n",s='"',a=s+s,i=!1,r=null,o=!1;!function(){if("object"!=typeof t)return;"string"!=typeof t.delimiter||b.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length||(m=t.delimiter);("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes);"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(i=t.skipEmptyLines);"string"==typeof t.newline&&(y=t.newline);"string"==typeof t.quoteChar&&(s=t.quoteChar);"boolean"==typeof t.header&&(_=t.header);if(Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");r=t.columns}void 0!==t.escapeChar&&(a=t.escapeChar+s);("boolean"==typeof t.escapeFormulae||t.escapeFormulae instanceof RegExp)&&(o=t.escapeFormulae instanceof RegExp?t.escapeFormulae:/^[=+\-@\t\r].*$/)}();var h=new RegExp(j(s),"g");"string"==typeof e&&(e=JSON.parse(e));if(Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return u(null,e,i);if("object"==typeof e[0])return u(r||Object.keys(e[0]),e,i)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||r),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),u(e.fields||[],e.data||[],i);throw new Error("Unable to serialize unrecognized input");function u(e,t,i){var r="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var n=Array.isArray(e)&&0<e.length,s=!Array.isArray(t[0]);if(n&&_){for(var a=0;a<e.length;a++)0<a&&(r+=m),r+=v(e[a],a);0<t.length&&(r+=y)}for(var o=0;o<t.length;o++){var h=n?e.length:t[o].length,u=!1,f=n?0===Object.keys(t[o]).length:0===t[o].length;if(i&&!n&&(u="greedy"===i?""===t[o].join("").trim():1===t[o].length&&0===t[o][0].length),"greedy"===i&&n){for(var d=[],l=0;l<h;l++){var c=s?e[l]:l;d.push(t[o][c])}u=""===d.join("").trim()}if(!u){for(var p=0;p<h;p++){0<p&&!f&&(r+=m);var g=n&&s?e[p]:p;r+=v(t[o][g],p)}o<t.length-1&&(!i||0<h&&!f)&&(r+=y)}}return r}function v(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var i=!1;o&&"string"==typeof e&&o.test(e)&&(e="'"+e,i=!0);var r=e.toString().replace(h,a);return(i=i||!0===n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var i=0;i<t.length;i++)if(-1<e.indexOf(t[i]))return!0;return!1}(r,b.BAD_DELIMITERS)||-1<r.indexOf(m)||" "===r.charAt(0)||" "===r.charAt(r.length-1))?s+r+s:r}}};if(b.RECORD_SEP=String.fromCharCode(30),b.UNIT_SEP=String.fromCharCode(31),b.BYTE_ORDER_MARK="\ufeff",b.BAD_DELIMITERS=["\r","\n",'"',b.BYTE_ORDER_MARK],b.WORKERS_SUPPORTED=!n&&!!f.Worker,b.NODE_STREAM_INPUT=1,b.LocalChunkSize=10485760,b.RemoteChunkSize=5242880,b.DefaultDelimiter=",",b.Parser=E,b.ParserHandle=i,b.NetworkStreamer=l,b.FileStreamer=c,b.StringStreamer=p,b.ReadableStreamStreamer=g,f.jQuery){var d=f.jQuery;d.fn.parse=function(o){var i=o.config||{},h=[];return this.each(function(e){if(!("INPUT"===d(this).prop("tagName").toUpperCase()&&"file"===d(this).attr("type").toLowerCase()&&f.FileReader)||!this.files||0===this.files.length)return!0;for(var t=0;t<this.files.length;t++)h.push({file:this.files[t],inputElem:this,instanceConfig:d.extend({},i)})}),e(),this;function e(){if(0!==h.length){var e,t,i,r,n=h[0];if(M(o.before)){var s=o.before(n.file,n.inputElem);if("object"==typeof s){if("abort"===s.action)return e="AbortError",t=n.file,i=n.inputElem,r=s.reason,void(M(o.error)&&o.error({name:e},t,i,r));if("skip"===s.action)return void u();"object"==typeof s.config&&(n.instanceConfig=d.extend(n.instanceConfig,s.config))}else if("skip"===s)return void u()}var a=n.instanceConfig.complete;n.instanceConfig.complete=function(e){M(a)&&a(e,n.file,n.inputElem),u()},b.parse(n.file,n.instanceConfig)}else M(o.complete)&&o.complete()}function u(){h.splice(0,1),e()}}}function _(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var i in e)t[i]=_(e[i]);return t}function M(e){return"function"==typeof e}return b.addError=function(e){return"string"==typeof e&&(e={message:e}),e.row=e.row||(-1===e.index?-1:Math.floor(e.index/e.chunkSize)),e},o&&(f.onmessage=function(e){var t=e.data;void 0===b.WORKER_ID&&t&&(b.WORKER_ID=t.workerId);if("string"==typeof t.input)f.postMessage({workerId:b.WORKER_ID,results:b.parse(t.input,t.config),finished:!0});else if(f.File&&t.input instanceof File||t.input instanceof Object){var i=b.parse(t.input,t.config);i&&f.postMessage({workerId:b.WORKER_ID,results:i,finished:!0})}}),(g.prototype=Object.create(m.prototype)).constructor=g,(c.prototype=Object.create(m.prototype)).constructor=c,(p.prototype=Object.create(m.prototype)).constructor=p,(l.prototype=Object.create(m.prototype)).constructor=l,E.prototype.parse=function(e,t,i){var r=this,n=0,s="";if(b.NODE_STREAM_INPUT,!t)for(var a=0;a<e.length;a++)e[a]instanceof File||(0!==a&&(s+="\n"),s+=JSON.stringify(e[a]));return this._nextChunk(),this._finished?"object"!=typeof(h=this._partialLine)||this._ignoreLastRow||(i=this._ignoreLastRow(this._partialLine,this.options.header),1===Math.max(0,h.length-1)&&!this._streamData&&this._streamEnd()?o={row:[h],type:"eof"}:this._streamData&&(o={results:{data:[h],errors:[],meta:{aborted:!1,cursor:n,fieldsLength:this.options.header?this.options.names.length:-1,truncated:!1}},this._streamData(o.results)),i&&(this._nextChunk(),o)):o:this._streamData?this._streamError('Delimiter found in CSV file not defined as delimiter for Papa Parse. Aborting parse.',e):this._streamEnd();function o(){return"string"!=typeof r.options.dynamicTypingFunction&&(r.options.dynamicTyping="function"==typeof r.options.dynamicTyping?r.options.dynamicTyping:{}),r.parseChunk(e,t)}var h},i.prototype=({abort:function(){this._aborted=!0},aborted:function(){return!!this._aborted},complete:function(){return!(this._finish=!this._config.stream&&!this._paused)&&(this._streamEnd(),!1)},delimiter:function(){return this._delimiter?this._delimiter:this._delimiterError?b.DefaultDelimiter:(this._delimiterError=!0,this.parseError("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+b.DefaultDelimiter+"'"),b.DefaultDelimiter)},pause:function(){this._paused=!0,this._input.pause()},resume:function(){this._paused=!1,this._decimator||(this._input.resume(),this._nextChunk())},streamer:function(){return this._input},parseError:function(e,t,i){var r={type:"Error",code:e,message:i};return this._streamError(r),r},_nextChunk:function(){this._readChunk(),this._chunkLoaded()},_readChunk:function(){this._paused||this._finished||this._input.readline(this._nextChunk.bind(this))},_chunkLoaded:function(){if(this._handle.paused()&&this._handle.resume(),!this._handle.aborted()&&(this._delimiter||(this._delimiterError=!1,this._delimiter=this._handle.delimiter()),!this._delimiterError&&!this._handle.aborted()))for(var e=this._handle.parseChunk(this._partialLine+this._chunk);!this._handle.paused()&&!this._handle.aborted()&&this._handle.streamer().peek();)e=this._handle.parseChunk(this._handle.streamer().peek())},_streamError:function(e,t){this._streamHooks.error&&this._streamHooks.error(e,t)},_streamEnd:function(){this._streamHooks.end&&this._streamHooks.end()}}),E.prototype.getCharIndex=function(){return this._cursor},E.prototype.abort=function(){this._aborted=!0},E.prototype.parse=function(e,t,i){var r=this,n=0,s=!1,a="";if(b.NODE_STREAM_INPUT,!t)for(var o=0;o<e.length;o++)e[o]instanceof File||(0!==o&&(a+="\n"),a+=JSON.stringify(e[o]));i=i||!1,!i&&e&&this._streamer._config.preview&&e.length>0&&(this._streamer._config.preview--,s=e.length<=this._streamer._config.preview);var h=function(){var e=r._partialLine+r._chunk,t=r.parse(e,n,!0);return r._partialLine=t.line,n=t.cursor,t.data||[]},u=function(){if(r._aborted)return{data:[],errors:[],meta:{aborted:!0}};if(s)return{data:h(),errors:[],meta:{aborted:!1}};var e,t=r._streamer._config.dynamicTyping;if("object"!=typeof t&&(t={}),r._nextChunk(),!r._finished){var i=h()[0];return i&&i.length?((e=r._streamer._config.preview&&r._streamer._config.header)?r._parseCSV():e||s||(e=!1,r._parseCSV(0,1,!1,!1,!0)),i.length<=1)?u():((e=r._streamer._config.header&&{fields:r._fields,data:[]})?r._streamData=function(e){r._streamer._streamData&&r._streamer._streamData(e)},{data:[i],errors:[],meta:{}}):u())}return{data:[],errors:[],meta:{aborted:!1}}};return e&&"string"==typeof e?(this._partialLine=e,this._cursor=e.length,this._lines=[],this._fields=i&&this._streamer&&this._streamer._config&&this._streamer._config.header?[]:null,{line:"",cursor:this._cursor,data:[],errors:[],meta:{aborted:!1}}):u()},E.prototype.parseChunk=function(e,t){var i,r;if(!this._aborted&&e&&e.length){t&&(this._partialLine=e,this._cursor=e.length);var n="string"!=typeof e;n?i=this.parse(this._partialLine,this._cursor,!0):i=this.parse(e,t,!0),r=[i.data],i&&i.errors&&(r[1]=i.errors),i&&i.meta&&(r[2]=i.meta);var s={data:r[0],errors:r[1]||[],meta:r[2]||{}};return n||this._streamer||(this._finished=!0),s}},E.prototype.parse=function(h,u,e){function t(){for(var e="",t=i+c;t<h.length;t++){var r=h[t];if(0<=o.indexOf(r)){e=h.substring(i+c,t),i=t;break}}if(e&&0<e.length)return e;if(i>=h.length)return"";throw new Error("CSVDataError: Unseparable data at row "+a+" col "+(i-p+c)+": "+h.substring(i+c))}function i(e){var t=0===s.length||s[s.length-1]!==e;return t&&s.push(e),t}function v(e){return u<=i?e:0===e.length?"":(e=l&&"greedy"!==f.skipEmptyLines?e.greedy().split(o[0]):e.trim().split(o[0]),e=l&&e.length<=1&&0===e[0].length?[]:e.map(function(e){return o.slice(1).reduce(function(e,t){return e.split(t).join("")},e)}),l?e:e.filter(function(e){return e.length}))}var f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},d=f.delimiter,l=f.skipEmptyLines,c=f.cursor||0;e=e||!1;var p=c,g=this._streamer&&this._streamer._config,i=0,_=0,m=0,y=[],w=[],s=[],r=h,a=-1;y.push(void 0),w.push(void 0);var o=d||this.delimiter();if(!o)throw new Error("CSVDataError: Delimiter not specified.");h&&0===h.length&&(h="\n");var t,n=0,x=0;for(this._streamer&&this._streamer._config.header&&(n=1,this._fields=this._fields||[]),this._streamer&&this._streamer._config.comments&&(n||(n=1)),t=0;t<=h.length;t++){var b=t<h.length?h[t]:null;if(null==b||0<=o.indexOf(b)||t===h.length){if(t===h.length&&0<r.length){var k=r.substring(0,t-i);if("string"!=typeof k&&(k=k&&k.toString?k.toString():""),t-i<=1)k="";else if(0===k.length)continue;a++,y.push(k),w.push(this.guessType(k)),s=[],i=t+1}else{s.push(b),m++,t!==h.length&&m%500!=0||(r=h.substring(t-m+1,t+1),i=t+1,m=0);continue}}_++,0===_&&n<=a&&(this._streamer&&this._streamer._config.header&&this._streamer._config.header?this._fields=y:x++),0===_&&this._fields&&this._fields.length<=y.length-1&&this._fields.push(y[y.length-1])}if(this._streamer&&this._streamer._config.header&&!this._fields)throw new Error("CSVDataError: No header row found.");var S,j,E=n=this._streamer&&this._streamer._config.header?1:0;if(e){var C=h;return m<h.length&&(C=h.substring(0,t),this._partialLine=h.substring(t+1),this._cursor=u?u:h.length),{line:C,cursor:this._cursor}}for(S=0;S<y.length;S++){for(j=n;j<y.length;j++)if(void 0===y[j])y.splice(j,1),w.splice(j,1),j--;else break;n=j}for(S=0;S<w.length;S++)w[S]=this.guessType(y[S]||"");var T=[];for("greedy"===l?(g&&g.header&&(T=[],E=1),S=E;S<y.length;S++)0<y[S].length&&T.push(this._streamer._config.dynamicTyping?this.toType(y[S],w[S]):y[S]):(g&&g.header&&(T=[],E=1),S=E;S<y.length;S++)void 0!==y[S]&&T.push(this._streamer._config.dynamicTyping?this.toType(y[S],w[S]):y[S]));return this._streamer&&this._streamer._config&&this._streamer._config.header&&this._fields?{fields:this._fields,data:T}:{data:T}},E.prototype.guessType=function(e){if(e&&e.length){for(var t=0,i=0;i<e.length;i++){var r=e[i];/\d/.test(r)?t++:(/[,.]/.test(r)||/^-?\d+[.]\d+$/.test(e))&&t++}return 0<t&&t/e.length>.5?"number":"string"}return"string"},E.prototype.toType=function(e,t){var i=this._streamer._config.dynamicTypingFunction,r="function"==typeof i?i(e):"string"===t?"string":"number"===t?"number":void 0!==i?i[e]||e:e;return"string"===r?e:"number"===r?Number(e):r},m.prototype={_init:function(e){var t=e.config||{};this._handle=new i(t),this._paused=!1,this._finished=!1,this._input="",this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}}},_chunkError:function(e,t){this._streamError(e+": "+t)},_streamError:function(e){this._streamHooks.error&&this._streamHooks.error(e)},_streamEnd:function(){this._streamHooks.end&&this._streamHooks.end(this._completeResults)},_streamData:function(e){this._streamHooks.data&&this._streamHooks.data(e),Array.prototype.push.apply(this._completeResults.data,e.data),Array.prototype.push.apply(this._completeResults.errors,e.errors),this._completeResults.meta=e.meta},_streamHeaders:function(e){this._streamHooks.headers&&this._streamHooks.headers(e)},_nextChunk:function(){this._finished||(this._paused||this._streamData({data:[],errors:[],meta:{}}),this._paused=!1)},_readChunk:function(){},_chunkLoaded:function(){this._start=0,this._baseIndex+=this._rowCount,this._rowCount=0,1===this._input.length?this._finished=!0:(this._nextChunk(),void 0)},_addError:function(e){this._streamError(e)},_onError:function(e,t){b.addError(e),t&&this._streamError(e+": "+t)},_insertIndex:function(e,t){},_handleOptions:function(e){},stream:function(e){var i=(e=e||{}).complete||function(){};if(e.step){var r="",n="",s={};e.step=function(e){if(void 0===n)return s={fields:e.fields},void(r=e.data.length?e.data[0]:null);if(s.data=e.data.slice(0,1),s.errors=e.errors,null!==r){for(var t=0;t<s.data.length;t++)s.data[t].unshift(r);r=e.data.length?e.data[0]:null}return e.data=s.data,e.errors=s.errors,e.meta=s.meta,n(e)}}this._streamHooks={headers:e.headers||function(){},data:e.step||function(){},error:e.error||function(){},end:i};try{this._streamData({data:[],errors:[],meta:{}})}catch(e){this._streamError(e.message)}return this._input=e.input,this._nextChunk(),this},_process:function(e){var t=this._handle;if(t.parseError&&!t.aborted())return t.parseError;if(t.streamer.finished()||t.streamer._halted)return!t.streamer._config.stream;try{var i=t.streamer.results();if(!t.streamer._config.stream&&!t._config.chunk||!j(i))return i;var r=Date.now();return t.streamer.pause(),this._streamHooks.data(i.results),Date.now()-r>=this._handle._config.chunkSize?(t.streamer.abort(),this._streamHooks.data({results:{data:[],errors:[]},meta:{cursor:t.streamer.file_cursor||0}}),this._completeResults.meta.aborted=!0,this._streamHooks.end(this._completeResults),!0):t.streamer.resume()&&!1}catch(e){return this._streamError(e),!0}function j(e){return e&&e.results&&"object"==typeof e.results}},abort:function(){this._input="";var e=this._completeResults;return e.data=[],e.errors=[],e.meta.aborted=!0,this._streamHooks.end(e),this}},f.Parse=function(e,t){return new function(){var n="undefined"==typeof e?"":""+e;t=t||{};var s=b.parse(n,t);return"string"==typeof n&&!t.download?{results:s}:{results:s,url:n,file:null}}},f.unparse=function(e,t){if("string"==typeof e)return b.unparse(Papa.parse(e,t).data,t);if("object"!=typeof e||Array.isArray(e)||!Array.isArray(e.data))return"object"==typeof e&&e.fields&&Array.isArray(e.fields)&&Array.isArray(e.data)?b.unparse(e.data,{header:!0,fields:e.fields}):b.unparse(e,t);if(!Array.isArray(e.data[0])&&"object"==typeof e.data[0]&&e.fields){var i=e.fields||Object.keys(e.data[0]),r=e.data.map(function(i){return i instanceof Array?i:i instanceof Object?i.fields?b.unparse({fields:i.fields||Object.keys(i.data[0]),data:i.data}):i:i});return b.unparse({fields:i,data:r})}return b.unparse(e.data,e)},f.SCRIPT_PATH=function(){var e=f.document.currentScript||function(){var e=f.document.getElementsByTagName("script");return e.length?e[e.length-1]:null}();return e&&e.src?e.src:""}(),f.RECORD_SEP=String.fromCharCode(30),f.UNIT_SEP=String.fromCharCode(31),f.BYTE_ORDER_MARK="\ufeff",f.BAD_DELIMITERS=["\r","\n",'"',f.BYTE_ORDER_MARK],f.WORKERS_SUPPORTED=!n&&!!f.Worker,f.NODE_STREAM_INPUT=1,f.LocalChunkSize=10485760,f.RemoteChunkSize=5242880,f.DefaultDelimiter=",",f.Parser=E,f.ParserHandle=i,f.NetworkStreamer=l,f.FileStreamer=c,f.StringStreamer=p,f.ReadableStreamStreamer=g,f.DuplexStreamStreamer=d,j=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},f});
